<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MS Accessories — Shop (Firebase Integrated)</title>

<link rel="stylesheet" href="style.css">

</head>
<body>

<header>
  <div class="header-left">
    <img class="logo" src="dummy.jpg" alt="MS Accessories" onclick="enlargeLogo(this)">
    <div>
      <div class="site-title">MS Accessories</div>
      <div style="font-size:12px;color:#666">Everyday style</div>
    </div>
  </div>

  <div class="header-right">
    <button class="icon-btn" onclick="showSection('home')" title="Home">Home</button>
    <button class="icon-btn" onclick="showSection('cart')" title="Cart">Cart (<span id="cart-count">0</span>)</button>

    <button class="icon-btn" id="account-open-btn" title="Account" onclick="toggleAccountDrawer()">
      <div id="account-bubble" class="account-bubble">A</div>
    </button>
  </div>
</header>

<main>
  <input id="search-bar" placeholder="Search products..." oninput="searchProducts()">

  <div id="category-tabs">
    <button onclick="filterCategory('All')">All</button>
    <button onclick="filterCategory('Necklace')">Necklace</button>
    <button onclick="filterCategory('Earrings')">Earrings</button>
    <button onclick="filterCategory('Bracelets')">Bracelets</button>
    <button onclick="filterCategory('Combo Boxes')">Combo Boxes</button>
  </div>

  <section id="home-section" class="section-card show">
    <h2>Products</h2>
    <div id="products">
      <div class="product-card" data-id="p1" data-name="Gold Necklace" data-category="Necklace" onclick="cardClicked(event,'p1')">
        <img src="dummy.jpg" alt="Gold Necklace">
        <h3 onclick="event.stopPropagation(); viewProduct('Gold Necklace',1200,'dummy.jpg','p1')">Gold Necklace</h3>
        <p class="price">₹1200</p>
        <div class="card-actions" id="actions-p1">
          <button class="btn btn-add" onclick="event.stopPropagation(); addToCartNow('p1')">Add to Cart</button>
          <button class="btn buy btn-buy" onclick="event.stopPropagation(); buyNow('p1')">Buy Now</button>
        </div>
      </div>

      <div class="product-card" data-id="p2" data-name="Silver Earrings" data-category="Earrings" onclick="cardClicked(event,'p2')">
        <img src="dummy.jpg" alt="Silver Earrings">
        <h3 onclick="event.stopPropagation(); viewProduct('Silver Earrings',499,'dummy.jpg','p2')">Silver Earrings</h3>
        <p class="price">₹499</p>
        <div class="card-actions" id="actions-p2">
          <button class="btn btn-add" onclick="event.stopPropagation(); addToCartNow('p2')">Add to Cart</button>
          <button class="btn buy btn-buy" onclick="event.stopPropagation(); buyNow('p2')">Buy Now</button>
        </div>
      </div>

      <div class="product-card" data-id="p3" data-name="Leather Bracelet" data-category="Bracelets" onclick="cardClicked(event,'p3')">
        <img src="dummy.jpg" alt="Leather Bracelet">
        <h3 onclick="event.stopPropagation(); viewProduct('Leather Bracelet',799,'dummy.jpg','p3')">Leather Bracelet</h3>
        <p class="price">₹799</p>
        <div class="card-actions" id="actions-p3">
          <button class="btn btn-add" onclick="event.stopPropagation(); addToCartNow('p3')">Add to Cart</button>
          <button class="btn buy btn-buy" onclick="event.stopPropagation(); buyNow('p3')">Buy Now</button>
        </div>
      </div>

      <div class="product-card" data-id="p4" data-name="Combo Box Special" data-category="Combo Boxes" onclick="cardClicked(event,'p4')">
        <img src="dummy.jpg" alt="Combo Box Special">
        <h3 onclick="event.stopPropagation(); viewProduct('Combo Box Special',1999,'dummy.jpg','p4')">Combo Box Special</h3>
        <p class="price">₹1999</p>
        <div class="card-actions" id="actions-p4">
          <button class="btn btn-add" onclick="event.stopPropagation(); addToCartNow('p4')">Add to Cart</button>
          <button class="btn buy btn-buy" onclick="event.stopPropagation(); buyNow('p4')">Buy Now</button>
        </div>
      </div>

    </div>
  </section>

  <section id="product-details" class="section-card">
    <button onclick="backHome()">← Back</button>
    <h2 id="detail-name"></h2>
    <img id="detail-image" src="" alt="">
    <p id="detail-price"></p>
    <div style="margin-top:12px;">
      <button class="btn" onclick="addToCart()">Add to Cart</button>
      <button class="btn buy" onclick="buyNow(selectedProduct.id)">Buy Now</button>
    </div>
  </section>

  <section id="cart-section" class="section-card">
    <h2>Your Cart</h2>
    <div id="cart-items"></div>
    <div class="cart-total">Total: ₹<span id="total">0</span></div>
    <div style="margin-top:12px;">
      <button class="btn buy" onclick="proceedToPayment()">Proceed to Payment (Buy Now)</button>
    </div>
  </section>

  <section id="payment-section" class="section-card">
    <h2>Checkout — Payment Options</h2>

    <div style="margin:10px 0 14px;padding:12px;border-radius:8px;background:#fbfbff;border:1px solid #eef0ff;">
      <strong>Order summary</strong>
      <div id="checkout-items" style="margin-top:8px;"></div>
      <div style="text-align:right;margin-top:10px;font-weight:800;">Total: ₹<span id="checkout-total">0</span></div>
    </div>

    <div class="pay-grid">
      <label class="payment-card" onclick="selectPayment('cod')">
        <input type="radio" name="payment" value="cod" onclick="selectPayment('cod')">
        <div>
          <strong>Cash on Delivery</strong>
          <div style="font-size:13px;color:#555">Pay with cash when your order arrives</div>
        </div>
      </label>

      <label class="payment-card" onclick="selectPayment('upi')">
        <input type="radio" name="payment" value="upi" onclick="selectPayment('upi')">
        <div>
          <strong>UPI (GPay / PhonePe / Paytm)</strong>
          <div style="font-size:13px;color:#555">Enter UPI ID or scan QR</div>
        </div>
      </label>

      <div id="upi-details" class="payment-details">
        <div style="margin-bottom:8px;"><strong>UPI ID</strong></div>
        <input id="upi-id" placeholder="example@okaxis" style="padding:10px;border-radius:8px;border:1px solid #ddd;width:100%">
        <div style="margin-top:8px;font-size:13px;color:#666">Or scan the QR code with your UPI app:</div>
        <div style="margin-top:8px;display:flex;gap:12px;align-items:center;">
          <div style="width:120px;height:120px;background:#fff;border:1px dashed #dedede;display:flex;align-items:center;justify-content:center;">QR</div>
          <div style="font-size:13px;color:#555">Open your UPI app and scan this QR to pay.</div>
        </div>
      </div>

      <label class="payment-card" onclick="selectPayment('scan')">
        <input type="radio" name="payment" value="scan" onclick="selectPayment('scan')">
        <div>
          <strong>Scan & Pay (QR)</strong>
          <div style="font-size:13px;color:#555">Scan QR using any UPI app</div>
        </div>
      </label>

      <label class="payment-card" onclick="selectPayment('card')">
        <input type="radio" name="payment" value="card" onclick="selectPayment('card')">
        <div>
          <strong>Credit / Debit Card</strong>
          <div style="font-size:13px;color:#555">Pay securely using your card</div>
        </div>
      </label>

      <div id="card-details" class="payment-details">
        <div class="form-row">
          <input id="card-number" placeholder="Card number (1111 2222 3333 4444)">
        </div>
        <div class="form-row">
          <input id="card-name" placeholder="Name on card">
        </div>
        <div class="form-row">
          <input id="card-exp" placeholder="MM/YY">
          <input id="card-cvv" placeholder="CVV">
        </div>
      </div>

      <label class="payment-card" onclick="selectPayment('netbank')">
        <input type="radio" name="payment" value="netbank" onclick="selectPayment('netbank')">
        <div>
          <strong>Net Banking</strong>
          <div style="font-size:13px;color:#555">Choose your bank</div>
        </div>
      </label>

      <div id="netbank-details" class="payment-details">
        <div style="margin-bottom:8px;">Select bank</div>
        <select id="bank-select" style="padding:10px;border-radius:8px;border:1px solid #ddd;">
          <option value="">-- Select Bank --</option>
          <option>HDFC Bank</option>
          <option>ICICI Bank</option>
          <option>State Bank of India</option>
          <option>Axis Bank</option>
          <option>Kotak Mahindra Bank</option>
        </select>
      </div>

    </div>

    <div style="margin-top:14px;display:flex;gap:10px;align-items:center;">
      <button class="btn buy" onclick="processPayment()">Proceed to Pay</button>
      <button class="btn" onclick="showSection('cart')">Back to Cart</button>
    </div>

    <div id="payment-confirm" class="confirm-banner">Payment processed (mock). Order placed — thank you!</div>
  </section>

</main>

<div id="account-drawer" aria-hidden="true">
  <div class="drawer-header">
    <div class="drawer-title">Account</div>
    <button class="close-drawer" onclick="toggleAccountDrawer()">✕</button>
  </div>

  <div style="display:flex;gap:12px;align-items:center;margin-bottom:10px">
    <div class="profile-pic" id="profile-pic-box"><span id="profile-initials" style="font-weight:800;color:#666">A</span></div>
    <div style="flex:1">
      <div id="account-name-display" style="font-weight:800">Guest</div>
      <div id="account-email-display" style="font-size:13px;color:#666">Not signed in</div>
    </div>
  </div>

  <div id="account-logged-out">
    <div style="margin-bottom:8px;font-weight:700">Welcome</div>

    <div style="margin-bottom:10px">
      <button class="btn buy" onclick="googleSignIn()">Sign in with Google</button>
      <div class="small-muted" style="margin-top:6px">Sign in with Google to keep your account across devices.</div>
    </div>

    <div style="height:1px;background:#eee;margin:12px 0"></div>

    <div class="login-block" id="login-block">
      <div style="font-weight:700;margin-bottom:6px">Log in (Email only)</div>
      <div class="input-row"><label>Email</label><input id="login-email" placeholder="your@email.com"></div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button class="btn" onclick="doLogin()">Log in</button>
        <button class="btn" onclick="showSignup()">Create account</button>
      </div>
      <div class="small-muted">Local login stores data on this browser only.</div>
    </div>

    <div id="signup-block" style="display:none;margin-top:12px">
      <div style="font-weight:700;margin-bottom:6px">Create account (Local)</div>
      <div class="input-row"><label>Name *</label><input id="su-name" placeholder="Full name"></div>
      <div class="input-row"><label>Email * (used to login)</label><input id="su-email" placeholder="you@email.com"></div>
      <div class="input-row"><label>Phone *</label><input id="su-phone" placeholder="10-digit phone"></div>
      <div class="input-row"><label>Address *</label><textarea id="su-address" rows="3" placeholder="House, street, city, pincode"></textarea></div>
      <div class="input-row"><label>Profile picture (optional)</label><input id="su-pic" type="file" accept="image/*"></div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button class="btn" onclick="createAccount()">Save account</button>
        <button class="btn" onclick="hideSignup()">Cancel</button>
      </div>
      <div class="small-muted">Fields marked * are required.</div>
    </div>
  </div>

  <div id="account-logged-in" style="display:none">
    <div style="font-weight:700;margin-bottom:8px">Your profile</div>

    <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
      <div class="profile-pic" id="profile-pic-edit"></div>
      <div style="flex:1">
        <div style="font-weight:800" id="profile-name-edit">User</div>
        <div style="font-size:13px;color:#666" id="profile-email-edit">email</div>
      </div>
    </div>

    <div class="input-row"><label>Name *</label><input id="pf-name"></div>
    <div class="input-row"><label>Email (not editable for cloud users)</label><input id="pf-email" disabled></div>
    <div class="input-row"><label>Phone *</label><input id="pf-phone"></div>
    <div class="input-row"><label>Address *</label><textarea id="pf-address" rows="3"></textarea></div>
    <div class="input-row"><label>Change profile picture</label><input id="pf-pic" type="file" accept="image/*"></div>

    <div class="drawer-actions">
      <button class="btn" onclick="saveProfile()">Save changes</button>
      <button class="btn" onclick="logout()">Log out</button>
    </div>
    <div class="small-muted">Name, Email, Phone, Address are required.</div>
  </div>
</div>

<footer class="footer">© 2025 MS Accessories</footer>

<script type="module" src="script.js"></script>

</body>
</html>
